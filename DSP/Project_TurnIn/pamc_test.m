function y = pamc_test(x)
%PAMC_TEST Filters input x and returns output y.

% MATLAB Code
% Generated by MATLAB(R) 8.6 and the DSP System Toolbox 9.1.
% Generated on: 13-Dec-2015 12:06:34

%#codegen

% To generate C/C++ code from this function use the codegen command. Type
% 'help codegen' for more information.

persistent Hd;

if isempty(Hd)
    
    % The following code was used to design the filter coefficients:
    % % Equiripple Bandstop filter designed using the FIRPM function.
    %
    % % All frequency values are in Hz.
    % Fs = 11025;  % Sampling Frequency
    %
    % Fpass1 = 1400;            % First Passband Frequency
    % Fstop1 = 1600;            % First Stopband Frequency
    % Fstop2 = 1700;            % Second Stopband Frequency
    % Fpass2 = 1900;            % Second Passband Frequency
    % Dpass1 = 0.028774368332;  % First Passband Ripple
    % Dstop  = 1e-05;           % Stopband Attenuation
    % Dpass2 = 0.028774368332;  % Second Passband Ripple
    % dens   = 20;              % Density Factor
    %
    % % Calculate the order from the parameters using FIRPMORD.
    % [N, Fo, Ao, W] = firpmord([Fpass1 Fstop1 Fstop2 Fpass2]/(Fs/2), [1 0 ...
    %                           1], [Dpass1 Dstop Dpass2]);
    %
    % % Calculate the coefficients using the FIRPM function.
    % b  = firpm(N, Fo, Ao, W, {dens});
    
    Hd = dsp.FIRFilter( ...
        'Numerator', [0.000164038094419468 -0.00328069384248068 ...
        -0.00042342021226031 7.5430573147004e-05 0.000344795841886539 ...
        0.000290082063331103 3.11145292964323e-05 -0.000135876868969716 ...
        -8.21707634946655e-05 1.54727821722207e-05 -8.25645708944847e-05 ...
        -0.00032137638055392 -0.000337966104006693 0.000120558284177035 ...
        0.000773478876474318 0.000931317502779554 0.000174787476160342 ...
        -0.00104897405793494 -0.00163866258388229 -0.000825018992103034 ...
        0.000945667649074519 0.00219466389469743 0.00167111275122003 ...
        -0.000400215359891116 -0.00233476133727867 -0.00240521157300808 ...
        -0.000437918898590119 0.0019344957687779 0.00268651317330215 ...
        0.00122056740160529 -0.0011153590661894 -0.00230722704594619 ...
        -0.00152100487147293 0.000255488467433092 0.00133505496901147 ...
        0.00102288441847007 0.000127224424999656 -0.000156877626151387 ...
        0.000293118931972381 0.000414965419512824 -0.000621000228542784 ...
        -0.00206104650702042 -0.00202503829461906 0.000402993159600646 ...
        0.00360182481451931 0.00439587090648516 0.00111430435906504 ...
        -0.00416319058328581 -0.00680225245448373 -0.00372741982939358 ...
        0.00324370717774221 0.00832805180284541 0.00669628280061961 ...
        -0.000893051101374767 -0.00824085876720317 -0.0089446152375146 ...
        -0.00217761494325471 0.00637074092037592 0.00946487392149503 ...
        0.00474477806148285 -0.00333325034882249 -0.00778628740678778 ...
        -0.00548187321491475 0.000464837857950433 0.0043247189797606 ...
        0.00351073247539009 0.000563383657439934 -0.000438320360872666 ...
        0.00110959322615232 0.00164505382080777 -0.00188579425125966 ...
        -0.00716600104653648 -0.00758404509109039 0.000655220729125454 ...
        0.0124736384341536 0.01643208438272 0.00537690995849959 ...
        -0.0144621030589212 -0.0260604386308478 -0.0160788114785743 ...
        0.01102294800287 0.0334975146158506 0.0297382092180549 ...
        -0.00129785258265554 -0.0357858245838411 -0.0433250294848078 ...
        -0.0138162403138378 0.0309327016698664 0.0532734003934443 ...
        0.0317064237951094 -0.0186578909401823 -0.0565041170826252 ...
        -0.0486350307608895 0.000661967414606243 0.0513875724622201 ...
        0.0607395961898435 0.0197080271088606 -0.0383206084725467 ...
        0.934869359998284 -0.0383206084725467 0.0197080271088606 ...
        0.0607395961898435 0.0513875724622201 0.000661967414606243 ...
        -0.0486350307608895 -0.0565041170826252 -0.0186578909401823 ...
        0.0317064237951094 0.0532734003934443 0.0309327016698664 ...
        -0.0138162403138378 -0.0433250294848078 -0.0357858245838411 ...
        -0.00129785258265554 0.0297382092180549 0.0334975146158506 ...
        0.01102294800287 -0.0160788114785743 -0.0260604386308478 ...
        -0.0144621030589212 0.00537690995849959 0.01643208438272 ...
        0.0124736384341536 0.000655220729125454 -0.00758404509109039 ...
        -0.00716600104653648 -0.00188579425125966 0.00164505382080777 ...
        0.00110959322615232 -0.000438320360872666 0.000563383657439934 ...
        0.00351073247539009 0.0043247189797606 0.000464837857950433 ...
        -0.00548187321491475 -0.00778628740678778 -0.00333325034882249 ...
        0.00474477806148285 0.00946487392149503 0.00637074092037592 ...
        -0.00217761494325471 -0.0089446152375146 -0.00824085876720317 ...
        -0.000893051101374767 0.00669628280061961 0.00832805180284541 ...
        0.00324370717774221 -0.00372741982939358 -0.00680225245448373 ...
        -0.00416319058328581 0.00111430435906504 0.00439587090648516 ...
        0.00360182481451931 0.000402993159600646 -0.00202503829461906 ...
        -0.00206104650702042 -0.000621000228542784 0.000414965419512824 ...
        0.000293118931972381 -0.000156877626151387 0.000127224424999656 ...
        0.00102288441847007 0.00133505496901147 0.000255488467433092 ...
        -0.00152100487147293 -0.00230722704594619 -0.0011153590661894 ...
        0.00122056740160529 0.00268651317330215 0.0019344957687779 ...
        -0.000437918898590119 -0.00240521157300808 -0.00233476133727867 ...
        -0.000400215359891116 0.00167111275122003 0.00219466389469743 ...
        0.000945667649074519 -0.000825018992103034 -0.00163866258388229 ...
        -0.00104897405793494 0.000174787476160342 0.000931317502779554 ...
        0.000773478876474318 0.000120558284177035 -0.000337966104006693 ...
        -0.00032137638055392 -8.25645708944847e-05 1.54727821722207e-05 ...
        -8.21707634946655e-05 -0.000135876868969716 3.11145292964323e-05 ...
        0.000290082063331103 0.000344795841886539 7.5430573147004e-05 ...
        -0.00042342021226031 -0.00328069384248068 0.000164038094419468]);
end
y = step(Hd,x);
y=y./max(abs(y));
audiowrite('clean_PaMc.wav',y,11025);